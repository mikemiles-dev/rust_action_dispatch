{% extends "layout" %}

{% block page %}
  <h1>Runs</h1>
  <input onchange="applyFilterAndReload('filter', this.value, false, true); return false" class="search" name="search" value="{{ filter }}" autofocus>

  <div style="float: left;">
    <div style="float: left; width: 50px; padding: 5px;">
      <b>To:</b><br>
      <b>From:</b>
    </div>
    <div style="float: left; width: 220px">
     <input type="datetime-local"><br>
     <input type="datetime-local">
    </div>
    <div style="float: left">
      <button class="btn" onclick="applyFilterAndReload('filter', '', true, true); return false;">Apply</button>
    </div>
  </div>
  

  <table>
    <thead>
      <tr>
        <th>Agent</th>
        <th>Job</th>
        <th><a href="#" onclick="applyFilterAndReload('sort', 'started_at', true);  return false;">Started At</a></th>
        <th><a href="#" onclick="applyFilterAndReload('sort', 'completed_at', true);  return false;">Completed At</a></th>
        <th>Return Code</th>
      </tr>
    </thead>
    <tbody>
      {% for item in items %}
        <tr>
          <td>{{ item.agent_name }}</td>
          <td>{{ item.job_name }}</td>
          <td class="utc-date" data-timestamp="{{ item.started_at['$date']['$numberLong'] }}">{{ item.started_at['$date']['$numberLong'] }}</td>
          <td class="utc-date" data-timestamp="{{ item.completed_at['$date']['$numberLong'] }}">{{ item.completed_at['$date']['$numberLong'] }}</td>
          <td>{{ item.return_code }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>

  {% include "pagination" %}
 
{% endblock %}